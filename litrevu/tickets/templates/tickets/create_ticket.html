{% extends 'tickets/base.html' %}


{% block title %}Créer un ticket{% endblock %}

{% block content %}
<div class="form-container">
    <form method="post" action="{% url 'create_ticket' %}" enctype="multipart/form-data">
        {% csrf_token %}
        <h2>Créer un ticket</h2>
        <div class="form-group">
            <input type="text" name="title" placeholder="Titre" class="form-control" required>
            {{ form.title.errors }}
        </div>
        <div class="form-group">
            <textarea name="description" placeholder="Description" class="form-control" required></textarea>
            {{ form.description.errors }}
        </div>
        <div class="form-group image-preview-container">
            <input type="file" name="image" id="imageUpload" class="form-control-file" onchange="previewImage(this);">
            <img src="" alt="Aperçu de l'image" id="imagePreview" style="display: none;">
            {{ form.image.errors }}
        </div>
        <div class="form-group">
            <button type="submit" class="btn">Envoyer</button>
        </div>
    </form>
</div>

<script>
    function previewImage(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                var preview = document.getElementById('imagePreview');
                preview.src = e.target.result;
                preview.style.display = 'block';
            };
            reader.readAsDataURL(input.files[0]);
        }
    }
</script>
{% endblock %}